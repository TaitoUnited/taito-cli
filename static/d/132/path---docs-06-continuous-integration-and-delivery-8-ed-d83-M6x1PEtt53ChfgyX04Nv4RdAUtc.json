{"data":{"doc":{"id":"ed13eb43-4f11-5f5e-b0d2-27651aeff8ae","html":"<h2 id=\"6-continuous-integration-and-delivery\"><a href=\"#6-continuous-integration-and-delivery\" aria-label=\"6 continuous integration and delivery permalink\" class=\"autolink-a\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Continuous integration and delivery</h2>\n<p>In most cases your CI/CD tool needs only to execute a bunch of simple Taito CLI commands to get the job done. Everything is already configured in taito-config.sh, and Taito CLI provides support for various infrastructures by plugins. This means that you can also easily run any of the CI/CD steps manually from command line using <em>Taito CLI</em>. A typical CI/CD process would consist of the following steps. Run <code class=\"language-text\">taito -h</code> to see decription of the commands.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Prepare build</span>\ntaito build prepare:<span class=\"token variable\">$BRANCH</span>\n\n<span class=\"token comment\"># Prepare all artifacts for deployment (execute in parallel)</span>\ntaito artifact prepare:client:<span class=\"token variable\">$BRANCH</span> <span class=\"token variable\">$COMMIT_SHA</span>\ntaito artifact prepare:server:<span class=\"token variable\">$BRANCH</span> <span class=\"token variable\">$COMMIT_SHA</span>\n\n<span class=\"token comment\"># Deploy the changes to target environment</span>\n<span class=\"token punctuation\">(</span>taito <span class=\"token function\">env</span> apply:<span class=\"token variable\">$BRANCH</span><span class=\"token punctuation\">)</span>\ntaito db deploy:<span class=\"token variable\">$BRANCH</span>\ntaito deployment deploy:<span class=\"token variable\">$BRANCH</span> <span class=\"token variable\">$COMMIT_SHA</span>\n\n<span class=\"token comment\"># Test and verify deployment</span>\ntaito deployment wait:<span class=\"token variable\">$BRANCH</span>\ntaito test:<span class=\"token variable\">$BRANCH</span>\ntaito deployment verify:<span class=\"token variable\">$BRANCH</span>\n\n<span class=\"token comment\"># Release all artifacts (execute in parallel)</span>\ntaito artifact release:client:<span class=\"token variable\">$BRANCH</span> <span class=\"token variable\">$COMMIT_SHA</span>\ntaito artifact release:server:<span class=\"token variable\">$BRANCH</span> <span class=\"token variable\">$COMMIT_SHA</span>\n\n<span class=\"token comment\"># Release build</span>\ntaito build release:<span class=\"token variable\">$BRANCH</span>\n\n<span class=\"token comment\"># ON FAIL: Revert deployment on fail</span>\ntaito deployment revert:<span class=\"token variable\">$BITBUCKET_BRANCH</span> <span class=\"token variable\">$COMMIT_SHA</span>\ntaito db revert:<span class=\"token variable\">$BITBUCKET_BRANCH</span> <span class=\"token variable\">$COMMIT_SHA</span></code></pre></div>\n<p>If you want your CI/CD to do more that it currently does, try not to add more CI/CD steps. Instead, enable plugins or add custom commands that do additional operations within the current CI/CD steps. For example, if you want to do something extra at the end of the CI/CD script, just enable some plugin that executes the additional operation on <code class=\"language-text\">taito build release</code>, or add a custom command to your package.json (e.g. <code class=\"language-text\">&quot;build-release&quot;: &quot;echo &#39;Do something extra&#39;&quot;</code>).</p>\n<h3 id=\"cicd-without-taito-cli\"><a href=\"#cicd-without-taito-cli\" aria-label=\"cicd without taito cli permalink\" class=\"autolink-a\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CI/CD without Taito CLI</h3>\n<p>If you for some reason cannot use Taito CLI in your CI/CD pipeline, you can easily implement the CI/CD steps yourself. First run each step manually with the verbose option (<code class=\"language-text\">taito -v</code>) to see the commands that Taito CLI executes under the hood. Then implement your CI/CD script based on those commands. You can also use <code class=\"language-text\">taito-config.sh</code> environment variables in your CI/CD script:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token keyword\">set</span> -a\ntaito_target_env<span class=\"token operator\">=</span><span class=\"token variable\">${BRANCH/master/prod}</span>\n<span class=\"token keyword\">.</span> taito-config.sh\n<span class=\"token keyword\">set</span> +a</code></pre></div>\n<p>Note that the CI/CD process may slightly differ depending on branch. On dev and feature branches the artifacts are usually tagged using <code class=\"language-text\">untested</code> suffix, and on master branch some additional steps are taken during <code class=\"language-text\">taito build release</code> to generate release notes, etc.</p>\n<hr>\n<p><strong>Next:</strong> <a href=\"/taito-cli/docs/07-infrastructure-management\">7. Infrastructure management</a></p>"},"menu":{"edges":[{"node":{"id":"84cc8b87-0109-5149-ae2e-62bcb2ce75dd","headings":[{"value":"1. Introduction"}],"fields":{"slug":"/docs/01-introduction/"}}},{"node":{"id":"587f0650-b787-540d-9fc3-e2dbfbb099bb","headings":[{"value":"2. Installation and upgrade"}],"fields":{"slug":"/docs/02-installation/"}}},{"node":{"id":"b60796de-4158-53ea-b943-33172dd98468","headings":[{"value":"3. Quick start"}],"fields":{"slug":"/docs/03-quick-start/"}}},{"node":{"id":"90915d5e-2d93-5a03-88e5-06f545205e95","headings":[{"value":"4. Usage"}],"fields":{"slug":"/docs/04-usage/"}}},{"node":{"id":"c2b9f7ba-3569-5d6e-b1a2-0e5ddd525610","headings":[{"value":"5. Configuration"}],"fields":{"slug":"/docs/05-configuration/"}}},{"node":{"id":"ed13eb43-4f11-5f5e-b0d2-27651aeff8ae","headings":[{"value":"6. Continuous integration and delivery"}],"fields":{"slug":"/docs/06-continuous-integration-and-delivery/"}}},{"node":{"id":"82820a75-9953-521e-95fb-3fd9fdbdf679","headings":[{"value":"7. Infrastructure management"},{"value":"Creating a zone"}],"fields":{"slug":"/docs/07-infrastructure-management/"}}},{"node":{"id":"ad984ceb-b9db-516a-b490-baa9781239b4","headings":[{"value":"8. ChatOps"}],"fields":{"slug":"/docs/08-chatops/"}}},{"node":{"id":"1c4160a7-9c03-5af9-bb25-cb7feb0a1e38","headings":[{"value":"9. Custom commands"}],"fields":{"slug":"/docs/09-custom-commands/"}}},{"node":{"id":"876a8a47-dd26-5bb3-b2f5-e7f1b14a97fd","headings":[{"value":"10. Custom plugins"}],"fields":{"slug":"/docs/10-custom-plugins/"}}},{"node":{"id":"5dcaca55-a038-568d-aa32-d3dc6efeeda0","headings":[{"value":"11. Custom project templates"}],"fields":{"slug":"/docs/11-custom-project-templates/"}}},{"node":{"id":"b3787ebb-1e99-5bdf-9e68-31f2d91cfcc5","headings":[{"value":"12. Taito CLI development"}],"fields":{"slug":"/docs/12-taito-cli-development/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"ed13eb43-4f11-5f5e-b0d2-27651aeff8ae"}}