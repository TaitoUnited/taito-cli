{"data":{"tutorial":{"id":"d83c3a19-3868-56cf-a5f9-b24b2af66b20","html":"<h1 id=\"part-ii-infrastructure\"><a href=\"#part-ii-infrastructure\" aria-label=\"part ii infrastructure permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PART II: Infrastructure</h1>\n<blockquote>\n<p>TODO: If zone does not yet exist, see chapter...\nTODO: Project configs not ok if zone has not yet been created</p>\n</blockquote>\n<h2 id=\"5-remote-environments\"><a href=\"#5-remote-environments\" aria-label=\"5 remote environments permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Remote environments</h2>\n<p>TODO describe environments:</p>\n<ul>\n<li><strong>f-NAME:</strong> feature</li>\n<li><strong>local:</strong> local development</li>\n<li><strong>dev:</strong> development</li>\n<li><strong>test:</strong> testing</li>\n<li><strong>stag:</strong> staging</li>\n<li><strong>canary:</strong> canary (runs side-by-side with production)</li>\n<li><strong>prod:</strong> production</li>\n</ul>\n<p>TODO hotfix branches</p>\n<p>TODO existing playground project -> destroy environments first.</p>\n<h3 id=\"51-create-dev-environment\"><a href=\"#51-create-dev-environment\" aria-label=\"51 create dev environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.1. Create dev environment</h3>\n<p>Create the dev environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">(</span> EDIT taito-config.sh <span class=\"token punctuation\">)</span>       <span class=\"token comment\"># No need to edit (dev is already enabled)</span>\ntaito <span class=\"token function\">env</span> apply:dev            <span class=\"token comment\"># Create the dev environment</span>\n<span class=\"token function\">git</span> push                       <span class=\"token comment\"># Push some changes to the dev branch</span></code></pre></div>\n<p>Make sure it works ok:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito <span class=\"token function\">open</span> builds              <span class=\"token comment\"># Watch it build and deploy automatically</span>\ntaito <span class=\"token function\">open</span> status:dev          <span class=\"token comment\"># Check status of dev environment</span>\ntaito <span class=\"token function\">open</span> client:dev          <span class=\"token comment\"># Open application GUI</span>\ntaito info:dev                 <span class=\"token comment\"># Show details for logging in</span>\ntaito db connect:dev           <span class=\"token comment\"># Connect to database</span>\ntaito <span class=\"token function\">open</span> storage:dev         <span class=\"token comment\"># Open storage bucket</span>\ntaito <span class=\"token function\">open</span> logs:dev            <span class=\"token comment\"># Open logs</span></code></pre></div>\n<p>The first CI/CD build will take some time. Subsequent builds are faster as they use a previous build as cache.</p>\n<h3 id=\"52-enable-automatic-integration-and-e2e-tests-for-dev-environment\"><a href=\"#52-enable-automatic-integration-and-e2e-tests-for-dev-environment\" aria-label=\"52 enable automatic integration and e2e tests for dev environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.2. Enable automatic integration and e2e tests for dev environment</h3>\n<ol>\n<li>\n<p>Enable <code class=\"language-text\">ci_exec_test</code> for <code class=\"language-text\">dev</code> environment in <code class=\"language-text\">taito-config.sh</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># NOTE: enable tests once you have implemented some integration or e2e tests</span>\nci_exec_test<span class=\"token operator\">=</span>true</code></pre></div>\n</li>\n<li>\n<p>Push the change to dev branch: <code class=\"language-text\">git push</code></p>\n</li>\n<li>\n<p>See build and test execution with <code class=\"language-text\">taito open builds</code></p>\n</li>\n</ol>\n<h3 id=\"53-run-integration-and-e2e-tests-manually-againts-the-dev-environment\"><a href=\"#53-run-integration-and-e2e-tests-manually-againts-the-dev-environment\" aria-label=\"53 run integration and e2e tests manually againts the dev environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.3. Run integration and e2e tests manually againts the dev environment</h3>\n<p>TODO some notes about docker-compose-test.yaml -> Taito CLI is used as proxy to access dev database.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito test:dev</code></pre></div>\n<h3 id=\"54-create-test-environment\"><a href=\"#54-create-test-environment\" aria-label=\"54 create test environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.4. Create test environment</h3>\n<p>Create the test environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">EDIT taito-config.sh           <span class=\"token comment\"># Add 'test' to 'taito_environments'</span>\ntaito <span class=\"token function\">env</span> apply:test           <span class=\"token comment\"># Create the test environment</span>\ntaito <span class=\"token function\">env</span> merge:dev <span class=\"token function\">test</span>       <span class=\"token comment\"># Merge changes from dev to test</span></code></pre></div>\n<p>Make sure it works:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito <span class=\"token function\">open</span> builds              <span class=\"token comment\"># Watch it build and deploy automatically</span>\ntaito <span class=\"token function\">open</span> status:test         <span class=\"token comment\"># Check status of test environment</span>\ntaito <span class=\"token function\">open</span> client:test         <span class=\"token comment\"># Open application GUI</span></code></pre></div>\n<h3 id=\"55-create-production-environment\"><a href=\"#55-create-production-environment\" aria-label=\"55 create production environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.5. Create production environment</h3>\n<p>Create the environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">(</span> EDIT taito-config.sh <span class=\"token punctuation\">)</span>       <span class=\"token comment\"># No need to edit (prod is already configured)</span>\ntaito <span class=\"token function\">env</span> apply:prod           <span class=\"token comment\"># Create the prod environment</span>\ntaito <span class=\"token function\">env</span> merge:test prod      <span class=\"token comment\"># Merge changes from test to prod</span></code></pre></div>\n<p>Make sure it works:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito <span class=\"token function\">open</span> builds              <span class=\"token comment\"># Watch it build and deploy automatically</span>\ntaito <span class=\"token function\">open</span> status:prod         <span class=\"token comment\"># Check status of prod environment</span>\ntaito <span class=\"token function\">open</span> client:prod         <span class=\"token comment\"># Open application GUI</span></code></pre></div>\n<blockquote>\n<p>At this point your production environment already exists. However, before releasing it to the real end-users you need to do some additional tasks that are explained in chapter <a href=\"#09-production-setup\">9. Production setup</a>.</p>\n</blockquote>\n<h3 id=\"56-create-canary-environment\"><a href=\"#56-create-canary-environment\" aria-label=\"56 create canary environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.6. Create canary environment</h3>\n<p>Canary environment is a special environment that uses production environment resources: databases, storage buckets, secrets and external services. That is, if you deploy your application to the canary environment, your application will run side-by-side with the production version of the application, and it will also use all the same resources.</p>\n<p>NOTE: Since canary environment uses production resources, you don't need to run <code class=\"language-text\">taito env apply:canary</code> when creating the environment.</p>\n<p>Create the canary environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">EDIT taito-config.sh             <span class=\"token comment\"># Add 'canary' to 'taito_environments'</span>\ntaito <span class=\"token function\">env</span> merge:test canary      <span class=\"token comment\"># Merge changes from test to canary</span></code></pre></div>\n<p>Make sure it works:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito <span class=\"token function\">open</span> builds                <span class=\"token comment\"># Watch it build and deploy automatically</span>\ntaito <span class=\"token function\">open</span> status:canary         <span class=\"token comment\"># Check status of canary environment</span>\ntaito <span class=\"token function\">open</span> client:canary         <span class=\"token comment\"># Open canary application GUI</span>\ntaito <span class=\"token function\">open</span> client:prod           <span class=\"token comment\"># Open production application GUI</span>\n** Create some posts <span class=\"token keyword\">in</span> the production app **\n** Resfresh the posts page <span class=\"token keyword\">in</span> the canary app -<span class=\"token operator\">></span> you'll see the new posts **</code></pre></div>\n<p>And how this works exactly? Well, the canary environment is mapped to production resources in <code class=\"language-text\">taito-config.sh</code> with these lines:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Environment mappings (for canary releases and A/B testing)</span>\ntaito_env<span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${taito_env/canary/prod}</span>\"</span> <span class=\"token comment\"># canary -> prod</span></code></pre></div>\n<h3 id=\"57-deploy-changes-through-multiple-environments-dev---canary\"><a href=\"#57-deploy-changes-through-multiple-environments-dev---canary\" aria-label=\"57 deploy changes through multiple environments dev   canary permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.7. Deploy changes through multiple environments (dev -> canary)</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> push                         <span class=\"token comment\"># Push some changes to the dev branch</span>\ntaito <span class=\"token function\">env</span> merge:dev canary       <span class=\"token comment\"># Merge changes: dev -> test -> canary</span>\ntaito <span class=\"token function\">open</span> builds                <span class=\"token comment\"># See them build and deploy</span></code></pre></div>\n<h3 id=\"58-create-a-feature-environment\"><a href=\"#58-create-a-feature-environment\" aria-label=\"58 create a feature environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.8. Create a feature environment</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">TODO</code></pre></div>\n<h3 id=\"59-delete-the-feature-environment\"><a href=\"#59-delete-the-feature-environment\" aria-label=\"59 delete the feature environment permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.9. Delete the feature environment</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">TODO</code></pre></div>\n<h3 id=\"510-revert-application-to-the-previous-revision\"><a href=\"#510-revert-application-to-the-previous-revision\" aria-label=\"510 revert application to the previous revision permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.10. Revert application to the previous revision</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito deployment revert:prod</code></pre></div>\n<h3 id=\"511-deploy-a-specific-version-of-the-application\"><a href=\"#511-deploy-a-specific-version-of-the-application\" aria-label=\"511 deploy a specific version of the application permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.11. Deploy a specific version of the application</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito deployment deploy:dev 1.1.0</code></pre></div>\n<h3 id=\"512-make-a-hotfix-for-production\"><a href=\"#512-make-a-hotfix-for-production\" aria-label=\"512 make a hotfix for production permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.12 Make a hotfix for production</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">TODO</code></pre></div>\n<h3 id=\"513-debugging\"><a href=\"#513-debugging\" aria-label=\"513 debugging permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.13. Debugging</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito <span class=\"token function\">open</span> logs:dev              <span class=\"token comment\"># Open logs of dev environment</span>\ntaito logs:server:dev            <span class=\"token comment\"># Tail logs of a container named 'worker'</span>\ntaito shell:server:dev           <span class=\"token comment\"># Start shell on a container named 'server'</span>\ntaito exec:server:dev <span class=\"token keyword\">echo</span> foo   <span class=\"token comment\"># Execute a command inside the server container</span></code></pre></div>\n<p>TODO link: Stackdriver log filtering instructions</p>\n<h3 id=\"514-some-additional-deployment-commands\"><a href=\"#514-some-additional-deployment-commands\" aria-label=\"514 some additional deployment commands permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.14. Some additional deployment commands</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito deployment start:dev        <span class=\"token comment\"># Start ci build for dev environment manually</span>\ntaito deployment cancel:dev       <span class=\"token comment\"># Cancel an ongoing dev environment build</span>\ntaito deployment build:worker:dev <span class=\"token comment\"># Build and deploy worker container to dev env directly from local env</span></code></pre></div>\n<h3 id=\"todo-something-about-advanced-deployment-options\"><a href=\"#todo-something-about-advanced-deployment-options\" aria-label=\"todo something about advanced deployment options permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TODO Something about advanced deployment options?</h3>\n<blockquote>\n<p>Some of the advanced operations might require admin credentials (e.g. staging/canary/production operations). If you don't have an admin account, ask devops personnel to execute the operation for you.</p>\n</blockquote>\n<p>Advanced features (TODO not all implemented yet):</p>\n<ul>\n<li><strong>Quickly deploy settings</strong>: If you are in a hurry, you can deploy Helm/Kubernetes changes directly to an environment with the <code class=\"language-text\">taito deployment deploy:ENV</code>.</li>\n<li><strong>Quickly deploy a container</strong>: If you are in a hurry, you can build, push and deploy a single container directly to server with the <code class=\"language-text\">taito deployment build:TARGET:ENV</code> command e.g. <code class=\"language-text\">taito deployment build:client:dev</code>.</li>\n<li><strong>Copy production data to staging</strong>: Often it's a good idea to copy production database to staging before merging changes to the stag branch: <code class=\"language-text\">taito db copy between:prod:stag</code>, <code class=\"language-text\">taito storage copy between:prod:stag</code>. If you are sure nobody is using the production database, you can alternatively use the quick copy (<code class=\"language-text\">taito db copyquick between:prod:stag</code>), but it disconnects all other users connected to the production database until copying is finished and also requires that both databases are located in the same database cluster.</li>\n<li><strong>Feature branch</strong>: You can create an environment also for a feature branch: <code class=\"language-text\">taito env apply:f-NAME</code>. The feature should reside in a branch named <code class=\"language-text\">feature/NAME</code>.</li>\n<li><strong>Revert application</strong>: Revert application to the previous revision by running <code class=\"language-text\">taito deployment revert:ENV</code>. If you need to revert to a specific revision, check current revision by running <code class=\"language-text\">taito deployment revisions:ENV</code> first and then revert to a specific revision by running <code class=\"language-text\">taito deployment revert:ENV REVISION</code>. You can also deploy a specific version with <code class=\"language-text\">taito deployment deploy:ENV IMAGE_TAG|SEMANTIC_VERSION</code>.</li>\n<li><strong>Debugging CI builds</strong>: You can build and start production containers locally with the <code class=\"language-text\">taito start --clean --prod</code> command. You can also run any CI build steps defined in cloudbuild.yaml locally with Taito CLI.</li>\n</ul>\n<hr>\n<p><strong>Next:</strong> <a href=\"/tutorial/06-env-variables-and-secrets\">6. Environment variables and secrets</a></p>"},"menu":{"edges":[{"node":{"id":"9162b0dd-c4f6-5ba0-988b-4c795a6ce66f","headings":[{"value":"1. Starting a new project"}],"fields":{"slug":"/tutorial/01-starting-a-new-project/"}}},{"node":{"id":"64c9ed3b-6893-5927-9d97-72bd14b54630","headings":[{"value":"2. Local development"}],"fields":{"slug":"/tutorial/02-local-development/"}}},{"node":{"id":"3827531b-fba0-5a2a-9084-52516d3872f3","headings":[{"value":"3. Version control"}],"fields":{"slug":"/tutorial/03-version-control/"}}},{"node":{"id":"b2030e15-dc9b-5f98-a5cf-3e3dccdd6c11","headings":[{"value":"4. Project management"}],"fields":{"slug":"/tutorial/04-project-management/"}}},{"node":{"id":"d83c3a19-3868-56cf-a5f9-b24b2af66b20","headings":[{"value":"5. Remote environments"}],"fields":{"slug":"/tutorial/05-remote-environments/"}}},{"node":{"id":"a3492616-cb8e-5f4a-b062-48d6537274e7","headings":[{"value":"6. Environment variables and secrets"}],"fields":{"slug":"/tutorial/06-env-variables-and-secrets/"}}},{"node":{"id":"121a9436-85c8-5b92-878e-f735f1eb93ff","headings":[{"value":"7. Databases and files"}],"fields":{"slug":"/tutorial/07-databases-and-files/"}}},{"node":{"id":"e748c043-1f1c-5518-80dd-80b011007d72","headings":[{"value":"8. Cloud services and Terraform"}],"fields":{"slug":"/tutorial/08-cloud-services-and-terraform/"}}},{"node":{"id":"29e65915-3efc-5834-94b8-14d162cd137f","headings":[{"value":"9. full-stack-template specific details"}],"fields":{"slug":"/tutorial/09-full-stack-template-specific/"}}},{"node":{"id":"18fc3997-3a39-5864-a5bf-e48ffc85bbfa","headings":[{"value":"10. Production setup"}],"fields":{"slug":"/tutorial/10-production-setup/"}}},{"node":{"id":"5accd1d7-2b43-5201-b38b-3aadfc1bcc78","headings":[{"value":"11. Running in production"}],"fields":{"slug":"/tutorial/11-running-in-production/"}}},{"node":{"id":"6609bb19-ef32-58a4-ad47-c9a560afa413","headings":[{"value":"12. Creating a custom command"}],"fields":{"slug":"/tutorial/12-creating-a-custom-command/"}}},{"node":{"id":"ed727541-68ed-5ffa-b500-3e2d67ee0aad","headings":[{"value":"13. Creating a custom plugin"}],"fields":{"slug":"/tutorial/13-creating-a-custom-plugin/"}}},{"node":{"id":"7c5da057-3c39-5275-b002-665f09bf652d","headings":[{"value":"14. Creating a custom template"}],"fields":{"slug":"/tutorial/14-creating-a-custom-template/"}}},{"node":{"id":"ac758a21-5898-581f-8f8a-89a8edfd94d1","headings":[{"value":"15. Creating a zone"}],"fields":{"slug":"/tutorial/15-creating-a-zone/"}}},{"node":{"id":"c697982a-07ef-554a-a3a3-041864902c34","headings":[{"value":"16. Zone maintenance"}],"fields":{"slug":"/tutorial/16-zone-maintenance/"}}},{"node":{"id":"cc1283ed-9c5b-54f3-9e58-066d00429a8e","headings":[{"value":"17. Zone monitoring"}],"fields":{"slug":"/tutorial/17-zone-monitoring/"}}},{"node":{"id":"d96b1123-f8bd-5207-864f-abc448c8a034","headings":[{"value":"18. Zone recovery"}],"fields":{"slug":"/tutorial/18-zone-recovery/"}}},{"node":{"id":"1e016b44-8bf7-5291-8a77-e33be39d3787","headings":[{"value":"APPENDIX A: Technology tutorials"}],"fields":{"slug":"/tutorial/a-technology-tutorials/"}}},{"node":{"id":"669a57d7-a9e4-5d0e-8f6b-be481ca4be38","headings":[{"value":"APPENDIX B: Software design"}],"fields":{"slug":"/tutorial/b-software-design/"}}},{"node":{"id":"97b359bc-af92-5837-937e-646a7c1751a6","headings":[{"value":"APPENDIX C: Modern server infrastructure"}],"fields":{"slug":"/tutorial/c-modern-server-infrastructure/"}}},{"node":{"id":"b6b33ce2-199f-5fce-b0a9-28f0fd30e0f9","headings":[{"value":"APPENDIX D: Security"}],"fields":{"slug":"/tutorial/d-security/"}}},{"node":{"id":"143d54e6-a662-5fe2-9b4d-5b3d8b7d8786","headings":[],"fields":{"slug":"/tutorial/e-data-protection-and-privacy/"}}},{"node":{"id":"48a7350b-c188-5631-9207-9ff5e68afb7e","headings":[{"value":"APPENDIX F: SSL/TLS certificates"}],"fields":{"slug":"/tutorial/f-certificates/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"d83c3a19-3868-56cf-a5f9-b24b2af66b20"}}