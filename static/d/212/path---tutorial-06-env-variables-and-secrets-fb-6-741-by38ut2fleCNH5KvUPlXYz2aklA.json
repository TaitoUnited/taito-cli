{"data":{"tutorial":{"id":"81897738-dd3b-5209-b61b-87db02fd9fb4","html":"<h2>6. Environment variables and secrets</h2>\n<p>TODO describe:</p>\n<ul>\n<li>docker-compose.yaml</li>\n<li>scripts/helm.yaml</li>\n<li>scripts/helm-ENV.yaml</li>\n</ul>\n<h3>6.1. Define an environment variable: same value for all environments</h3>\n<p>Add the variable to docker-compose.yaml for local development:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">environment:\n  MY_VARIABLE: my_value</code></pre></div>\n<p>Add the variable to scripts/helm.yaml:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">env:\n  MY_VARIABLE: my_value</code></pre></div>\n<h3>6.2. Define an environment variable: different value for each environment</h3>\n<p>Add the variable to docker-compose.yaml for local development:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">environment:\n  MY_VARIABLE: my_value</code></pre></div>\n<p>Add default value for the variable to scripts/helm.yaml:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">env:\n  MY_VARIABLE: my_value</code></pre></div>\n<p>Add environment specific value to <code class=\"language-text\">scripts/helm-ENV.yaml</code> file for such environments that do not use the default value:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">env:\n  MY_VARIABLE: my_value</code></pre></div>\n<h3>6.3. Deploy a configuration changes without rebuilding</h3>\n<p>First make the configuration changes and push them to dev branch. Then deploy the configuration changes directly to different environments:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito deployment deploy:stag\ntaito deployment deploy:prod</code></pre></div>\n<blockquote>\n<p>TODO: Currently you always need to give image tag as a parameter. See the latest image tag deployed successfully for the branch in question by running <code class=\"language-text\">taito open builds</code>.</p>\n</blockquote>\n<h3>6.4. Define a secret</h3>\n<p>taito-config.sh:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito_secrets<span class=\"token operator\">=</span><span class=\"token string\">\"\n  <span class=\"token variable\">${taito_project}</span>-<span class=\"token variable\">${taito_env}</span>-my-secret.key:manual\n\"</span></code></pre></div>\n<p>helm.yaml:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">secrets:\n  MY_SECRET_KEY: <span class=\"token variable\">${taito_project}</span>-<span class=\"token variable\">${taito_env}</span>-my-secret.key</code></pre></div>\n<p>docker-compose.yaml:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">environment:\n  MY_SECRET_KEY: <span class=\"token variable\">${acme-myproject-dev-my-secret-key}</span></code></pre></div>\n<p>Set secret value for each environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito <span class=\"token function\">env</span> rotate:dev my-secret\ntaito <span class=\"token function\">env</span> rotate:test my-secret\ntaito <span class=\"token function\">env</span> rotate:prod my-secret</code></pre></div>\n<blockquote>\n<p>TODO: Describe how to use the same secret value for local and dev environment without committing it to git.</p>\n</blockquote>\n<h3>6.5. User specific variables</h3>\n<p>TODO</p>\n<hr>\n<p><strong>Next:</strong> <a href=\"/tutorial/07-databases-and-files\">7. Databases and files</a></p>"},"menu":{"edges":[{"node":{"id":"81bf5f66-6991-5d50-b34c-d0a6d9a3c844","headings":[{"value":"1. Starting a new project"}],"fields":{"slug":"/tutorial/01-starting-a-new-project/"}}},{"node":{"id":"0792cd1f-75ad-572c-a669-1191588b6a04","headings":[{"value":"2. Local development"}],"fields":{"slug":"/tutorial/02-local-development/"}}},{"node":{"id":"5ce7ad6b-83e4-5e37-8545-ee10ebb22e75","headings":[{"value":"3. Version control"}],"fields":{"slug":"/tutorial/03-version-control/"}}},{"node":{"id":"5f7bbe2a-ebbb-59db-a6ea-3f2759290067","headings":[{"value":"4. Project management"}],"fields":{"slug":"/tutorial/04-project-management/"}}},{"node":{"id":"3ea5bd2b-a017-57de-b0a7-649fcc6dd5d6","headings":[{"value":"5. Remote environments"}],"fields":{"slug":"/tutorial/05-remote-environments/"}}},{"node":{"id":"81897738-dd3b-5209-b61b-87db02fd9fb4","headings":[{"value":"6. Environment variables and secrets"}],"fields":{"slug":"/tutorial/06-env-variables-and-secrets/"}}},{"node":{"id":"929d6d9c-d2a3-5545-8862-dd9fc5950659","headings":[{"value":"7. Databases and files"}],"fields":{"slug":"/tutorial/07-databases-and-files/"}}},{"node":{"id":"b0b173b7-8469-5fc9-8755-17c06dda3f17","headings":[{"value":"8. Cloud services and Terraform"}],"fields":{"slug":"/tutorial/08-cloud-services-and-terraform/"}}},{"node":{"id":"bc11c536-55e3-5f1e-a940-4582a109b457","headings":[{"value":"9. full-stack-template specific details"}],"fields":{"slug":"/tutorial/09-full-stack-template-specific/"}}},{"node":{"id":"1c4672aa-13fc-5cd4-8f5e-54bf2ae8dcc5","headings":[{"value":"10. Production setup"}],"fields":{"slug":"/tutorial/10-production-setup/"}}},{"node":{"id":"f2a9b4ca-ac0b-553e-b787-6209b5fea557","headings":[{"value":"11. Running in production"}],"fields":{"slug":"/tutorial/11-running-in-production/"}}},{"node":{"id":"d6c5caee-601f-5704-b453-9255f5fea911","headings":[{"value":"12. Creating a custom command"}],"fields":{"slug":"/tutorial/12-creating-a-custom-command/"}}},{"node":{"id":"380f11d9-2d35-57b6-a87a-300e87cc1e22","headings":[{"value":"13. Creating a custom plugin"}],"fields":{"slug":"/tutorial/13-creating-a-custom-plugin/"}}},{"node":{"id":"69528a95-f510-5e88-867d-fe77a74a4e3d","headings":[{"value":"14. Creating a custom template"}],"fields":{"slug":"/tutorial/14-creating-a-custom-template/"}}},{"node":{"id":"bd20f397-0a6c-560f-b015-849a5c4cc39e","headings":[{"value":"15. Creating a zone"}],"fields":{"slug":"/tutorial/15-creating-a-zone/"}}},{"node":{"id":"8292ab79-7fc0-56de-8f95-fdd79a0a04f0","headings":[{"value":"16. Zone maintenance"}],"fields":{"slug":"/tutorial/16-zone-maintenance/"}}},{"node":{"id":"210b4457-4fe2-5bb4-ace2-0e2f602a9704","headings":[{"value":"17. Zone monitoring"}],"fields":{"slug":"/tutorial/17-zone-monitoring/"}}},{"node":{"id":"806495a0-4175-5179-97e8-391c63d9dba8","headings":[{"value":"18. Zone recovery"}],"fields":{"slug":"/tutorial/18-zone-recovery/"}}},{"node":{"id":"80111ccd-0af0-59ef-9cb5-a304f5575cc5","headings":[{"value":"APPENDIX A: Technology tutorials"}],"fields":{"slug":"/tutorial/a-technology-tutorials/"}}},{"node":{"id":"e1361d3d-4c2f-5f5b-8d1e-d594382f160f","headings":[{"value":"APPENDIX B: Software design"}],"fields":{"slug":"/tutorial/b-software-design/"}}},{"node":{"id":"f5d13277-8d5b-538a-a4ab-10b9b5f39473","headings":[{"value":"APPENDIX C: Modern server infrastructure"}],"fields":{"slug":"/tutorial/c-modern-server-infrastructure/"}}},{"node":{"id":"6673546d-494e-5691-8485-19a1643b5451","headings":[{"value":"APPENDIX D: Security"}],"fields":{"slug":"/tutorial/d-security/"}}},{"node":{"id":"1c6777d8-17bc-5001-af9c-84509e3d5b87","headings":[],"fields":{"slug":"/tutorial/e-data-protection-and-privacy/"}}},{"node":{"id":"099d3664-78d3-593b-8718-6de838c1b9d7","headings":[{"value":"APPENDIX F: SSL/TLS certificates"}],"fields":{"slug":"/tutorial/f-certificates/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"81897738-dd3b-5209-b61b-87db02fd9fb4"}}