{"data":{"tutorial":{"id":"a3492616-cb8e-5f4a-b062-48d6537274e7","html":"<h2>6. Environment variables and secrets</h2>\n<p>TODO describe:</p>\n<ul>\n<li>docker-compose.yaml</li>\n<li>scripts/helm.yaml</li>\n<li>scripts/helm-ENV.yaml</li>\n</ul>\n<h3>6.1. Define an environment variable: same value for all environments</h3>\n<p>Add the variable to docker-compose.yaml for local development:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">environment:\n  MY_VARIABLE: my_value</code></pre></div>\n<p>Add the variable to scripts/helm.yaml:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">env:\n  MY_VARIABLE: my_value</code></pre></div>\n<h3>6.2. Define an environment variable: different value for each environment</h3>\n<p>Add the variable to docker-compose.yaml for local development:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">environment:\n  MY_VARIABLE: my_value</code></pre></div>\n<p>Add default value for the variable to scripts/helm.yaml:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">env:\n  MY_VARIABLE: my_value</code></pre></div>\n<p>Add environment specific value to <code class=\"language-text\">scripts/helm-ENV.yaml</code> file for such environments that do not use the default value:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">env:\n  MY_VARIABLE: my_value</code></pre></div>\n<h3>6.3. Deploy a configuration changes without rebuilding</h3>\n<p>First make the configuration changes and push them to dev branch. Then deploy the configuration changes directly to different environments:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito deployment deploy:stag\ntaito deployment deploy:prod</code></pre></div>\n<blockquote>\n<p>TODO: Currently you always need to give image tag as a parameter. See the latest image tag deployed successfully for the branch in question by running <code class=\"language-text\">taito open builds</code>.</p>\n</blockquote>\n<h3>6.4. Define a secret</h3>\n<p>taito-config.sh:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito_secrets<span class=\"token operator\">=</span><span class=\"token string\">\"\n  <span class=\"token variable\">${taito_project}</span>-<span class=\"token variable\">${taito_env}</span>-my-secret.key:manual\n\"</span></code></pre></div>\n<p>helm.yaml:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">secrets:\n  MY_SECRET_KEY: <span class=\"token variable\">${taito_project}</span>-<span class=\"token variable\">${taito_env}</span>-my-secret.key</code></pre></div>\n<p>docker-compose.yaml:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">environment:\n  MY_SECRET_KEY: <span class=\"token variable\">${acme-myproject-dev-my-secret-key}</span></code></pre></div>\n<p>Set secret value for each environment:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">taito <span class=\"token function\">env</span> rotate:dev my-secret\ntaito <span class=\"token function\">env</span> rotate:test my-secret\ntaito <span class=\"token function\">env</span> rotate:prod my-secret</code></pre></div>\n<blockquote>\n<p>TODO: Describe how to use the same secret value for local and dev environment without committing it to git.</p>\n</blockquote>\n<h3>6.5. User specific variables</h3>\n<p>TODO</p>\n<hr>\n<p><strong>Next:</strong> <a href=\"/taito-cli/tutorial/07-databases-and-files\">7. Databases and files</a></p>"},"menu":{"edges":[{"node":{"id":"9162b0dd-c4f6-5ba0-988b-4c795a6ce66f","headings":[{"value":"1. Starting a new project"}],"fields":{"slug":"/tutorial/01-starting-a-new-project/"}}},{"node":{"id":"64c9ed3b-6893-5927-9d97-72bd14b54630","headings":[{"value":"2. Local development"}],"fields":{"slug":"/tutorial/02-local-development/"}}},{"node":{"id":"3827531b-fba0-5a2a-9084-52516d3872f3","headings":[{"value":"3. Version control"}],"fields":{"slug":"/tutorial/03-version-control/"}}},{"node":{"id":"b2030e15-dc9b-5f98-a5cf-3e3dccdd6c11","headings":[{"value":"4. Project management"}],"fields":{"slug":"/tutorial/04-project-management/"}}},{"node":{"id":"d83c3a19-3868-56cf-a5f9-b24b2af66b20","headings":[{"value":"5. Remote environments"}],"fields":{"slug":"/tutorial/05-remote-environments/"}}},{"node":{"id":"a3492616-cb8e-5f4a-b062-48d6537274e7","headings":[{"value":"6. Environment variables and secrets"}],"fields":{"slug":"/tutorial/06-env-variables-and-secrets/"}}},{"node":{"id":"121a9436-85c8-5b92-878e-f735f1eb93ff","headings":[{"value":"7. Databases and files"}],"fields":{"slug":"/tutorial/07-databases-and-files/"}}},{"node":{"id":"e748c043-1f1c-5518-80dd-80b011007d72","headings":[{"value":"8. Cloud services and Terraform"}],"fields":{"slug":"/tutorial/08-cloud-services-and-terraform/"}}},{"node":{"id":"29e65915-3efc-5834-94b8-14d162cd137f","headings":[{"value":"9. full-stack-template specific details"}],"fields":{"slug":"/tutorial/09-full-stack-template-specific/"}}},{"node":{"id":"18fc3997-3a39-5864-a5bf-e48ffc85bbfa","headings":[{"value":"10. Production setup"}],"fields":{"slug":"/tutorial/10-production-setup/"}}},{"node":{"id":"5accd1d7-2b43-5201-b38b-3aadfc1bcc78","headings":[{"value":"11. Running in production"}],"fields":{"slug":"/tutorial/11-running-in-production/"}}},{"node":{"id":"6609bb19-ef32-58a4-ad47-c9a560afa413","headings":[{"value":"12. Creating a custom command"}],"fields":{"slug":"/tutorial/12-creating-a-custom-command/"}}},{"node":{"id":"ed727541-68ed-5ffa-b500-3e2d67ee0aad","headings":[{"value":"13. Creating a custom plugin"}],"fields":{"slug":"/tutorial/13-creating-a-custom-plugin/"}}},{"node":{"id":"7c5da057-3c39-5275-b002-665f09bf652d","headings":[{"value":"14. Creating a custom template"}],"fields":{"slug":"/tutorial/14-creating-a-custom-template/"}}},{"node":{"id":"ac758a21-5898-581f-8f8a-89a8edfd94d1","headings":[{"value":"15. Creating a zone"}],"fields":{"slug":"/tutorial/15-creating-a-zone/"}}},{"node":{"id":"c697982a-07ef-554a-a3a3-041864902c34","headings":[{"value":"16. Zone maintenance"}],"fields":{"slug":"/tutorial/16-zone-maintenance/"}}},{"node":{"id":"cc1283ed-9c5b-54f3-9e58-066d00429a8e","headings":[{"value":"17. Zone monitoring"}],"fields":{"slug":"/tutorial/17-zone-monitoring/"}}},{"node":{"id":"d96b1123-f8bd-5207-864f-abc448c8a034","headings":[{"value":"18. Zone recovery"}],"fields":{"slug":"/tutorial/18-zone-recovery/"}}},{"node":{"id":"1e016b44-8bf7-5291-8a77-e33be39d3787","headings":[{"value":"APPENDIX A: Technology tutorials"}],"fields":{"slug":"/tutorial/a-technology-tutorials/"}}},{"node":{"id":"669a57d7-a9e4-5d0e-8f6b-be481ca4be38","headings":[{"value":"APPENDIX B: Software design"}],"fields":{"slug":"/tutorial/b-software-design/"}}},{"node":{"id":"97b359bc-af92-5837-937e-646a7c1751a6","headings":[{"value":"APPENDIX C: Modern server infrastructure"}],"fields":{"slug":"/tutorial/c-modern-server-infrastructure/"}}},{"node":{"id":"b6b33ce2-199f-5fce-b0a9-28f0fd30e0f9","headings":[{"value":"APPENDIX D: Security"}],"fields":{"slug":"/tutorial/d-security/"}}},{"node":{"id":"143d54e6-a662-5fe2-9b4d-5b3d8b7d8786","headings":[],"fields":{"slug":"/tutorial/e-data-protection-and-privacy/"}}},{"node":{"id":"48a7350b-c188-5631-9207-9ff5e68afb7e","headings":[{"value":"APPENDIX F: SSL/TLS certificates"}],"fields":{"slug":"/tutorial/f-certificates/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"a3492616-cb8e-5f4a-b062-48d6537274e7"}}