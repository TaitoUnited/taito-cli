{"data":{"tutorial":{"id":"e1361d3d-4c2f-5f5b-8d1e-d594382f160f","html":"<h2>APPENDIX B: Software design</h2>\n<h3>Modular structure</h3>\n<p>Many tutorials introduce you a monolithic application structure: put all application state in this directory, put all application actions into another directory. This works ok for a very small application, but it starts to become problematic once the codebase grows larger. Another approach would be to split the frontend into separate micro frontends and the backend into separate microservices. But this can be a bit overkill approach for a small application or API. When in doubt, a monolithic implementation with a modular structure is often the best approach for quickly building the first MVP or prototype. When done correctly, the modular structure can easily be split into separate micro frontends and microservices once required.</p>\n<p>Whether you are building a monolithic implementation or separate micro frontends and microservices, an application or API codebase should always be divided into loosely coupled highly cohesive parts by using a modular structure. Even if the monolithic implementation is not going to be split into micro frontends and microservices later, the modular structure provides many benefits, for example:</p>\n<ul>\n<li>When making a change, it's easier to see how widely the change might affect the application.</li>\n<li>When implementing a new feature, there is no need to jump around in the codebase as much.</li>\n<li>It's easier for a new developer to implement new features without knowing the whole codebase.</li>\n<li>Once the application grows and time passes, it's easier to rewrite some parts of the application using a newer technology without affecting the other parts.</li>\n</ul>\n<p>The following guidelines usually work well when building a modular monolithic implementation:</p>\n<ul>\n<li>Create directory structure mainly based on domain concepts or features (<code class=\"language-text\">billing</code>, <code class=\"language-text\">management</code>, <code class=\"language-text\">trip</code>, ...) instead of technical type or layer (<code class=\"language-text\">actions</code>, <code class=\"language-text\">containers</code>, <code class=\"language-text\">components</code>, <code class=\"language-text\">css</code>, <code class=\"language-text\">utils</code>, ...).</li>\n<li>You can use event-based communication to avoid direct calls between loosely coupled parts. That is, one UI section or service produces events that the others can listen to, if they are interested in such an event.</li>\n<li>Use such file naming that you can easily determine the type from a filename (e.g. <code class=\"language-text\">*.util.js</code>, <code class=\"language-text\">*.api.js</code>). This way you don't need to use additional directories for grouping files by type. Thus, you can freely place a file wherever it is needed. NOTE: It is ok to exclude type from GUI component filenames to keep import statements shorter. Just make sure that you can easily determine type and responsibility from a filename, and that you use the same naming convention throughout the codebase.</li>\n<li>A directory should not contain any references outside of its boundary; with the exception of references to libraries and common directories. You can think of each directory as an independent concept (or subconcept), and each <code class=\"language-text\">common</code> directory as a library that is shared among closely related concepts (or subconcepts).</li>\n<li>A file should contain only nearby references (e.g. references to files in the same directory or in a subdirectory directly beneath it); with the exception of references to libraries and common directories, of course.</li>\n<li>If you break the guidelines, at least try to avoid making circular dependencies. Also leave a <code class=\"language-text\">REFACTOR:</code> comment if the dependency is the kind that it should be refactored later.</li>\n</ul>\n<p>See <a href=\"https://github.com/TaitoUnited/server-template/tree/master/client/src\">full-stack-template/client/src</a> as an example.</p>\n<p>TODO: DRY, KISS, YAGNI, GRASP, SOLID\nTODO: <a href=\"https://jaxenter.com/promising-new-metric-track-maintainability-154195.html\">https://jaxenter.com/promising-new-metric-track-maintainability-154195.html</a>\nTODO: <a href=\"https://www.tutorialspoint.com/software_engineering/software_design_basics.htm\">https://www.tutorialspoint.com/software<em>engineering/software</em>design_basics.htm</a></p>\n<h3>API design</h3>\n<p>REST and GraphQL API implementations should be stateless. Stateless means that a service does not keep any state in memory or on local disk between requests. That is, all state resides either on UI, on database, or on some other external system. Services should be stateless because multiple instances of the same service will be run in parallel, and the request that an UI or 3rd party system makes, may be forwarded to any them. In addition, you should be able to publish a new version of the service any time without causing interruptions, which is harder to do if service is stateful. A stateless service should not:</p>\n<ul>\n<li>Cache data in local memory (tip: use Redis as cache, or keep state in UI and use JWT tokens if necessary)</li>\n<li>Use local disk for permanent data (tip: use object storage buckets)</li>\n<li>Define request rate limits (tip: define rate limits in Kubernetes ingress)</li>\n<li>Use local timers to execute jobs (tip: use Kubernetes cron jobs)</li>\n<li>TODO stateless websockets</li>\n</ul>\n<h4>RESTful API design</h4>\n<p>Some good articles on REST API design:</p>\n<ul>\n<li><a href=\"http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api\">best-practices-for-a-pragmatic-restful-api</a></li>\n<li><a href=\"https://blog.mwaysolutions.com/2014/06/05/10-best-practices-for-better-restful-api/\">10-best-practices-for-better-restful-api</a></li>\n<li><a href=\"https://cloudplatform.googleblog.com/2017/10/API-design-choosing-between-names-and-identifiers-in-URLs.html\">API-design-choosing-between-names-and-identifiers-in-URLs</a></li>\n<li><a href=\"https://cloud.google.com/apis/design/\">Google API Design Guide</a></li>\n<li><a href=\"http://jsonapi.org/\">jsonapi.org</a>: Remember KISS principle! JSON API seems to be a bit over-engineered for the needs of a simple web application, but provides some good ideas.</li>\n<li><a href=\"http://apiux.com/2014/09/05/api-design-sustainability/\">How to design APIs that last</a></li>\n<li><a href=\"http://www.slideshare.net/JasonHarmon1/api-design-antipatterns-54493635\">API design anti-patterns</a></li>\n</ul>\n<h4>GraphQL API design</h4>\n<p>TODO</p>\n<h3>Relational database design</h3>\n<ul>\n<li><a href=\"http://www.datanamic.com/support/lt-dez005-introduction-db-modeling.html\">introduction-db-modeling</a></li>\n<li><a href=\"http://www.vertabelo.com/blog/technical-articles/7-common-database-design-errors\">7-common-database-design-errors</a></li>\n<li><a href=\"https://www.simple-talk.com/sql/database-administration/how-to-get-database-design-horribly-wrong/\">how-to-get-database-design-horribly-wrong</a></li>\n<li><a href=\"https://www.simple-talk.com/sql/database-administration/five-simple-database-design-errors-you-should-avoid/\">five-simple-database-design-errors-you-should-avoid</a></li>\n<li><a href=\"https://edn.embarcadero.com/article/40466\">Seven Deadly Sins of Database Design</a></li>\n</ul>\n<p>TODO: conventions for audit log and/or journal tables. Take GDPR into account.</p>\n<h3>TODO some copy-pasted old text</h3>\n<h4>Structure</h4>\n<p>Think about the following concepts while you are working with your project. You can apply them no matter whether you are working with services, modules, directories, classes or just plain methods and functions. Do not blindly follow structure shown on tutorials or starter templates since those are really meant for quick start only.</p>\n<ul>\n<li><strong>Loose coupling:</strong> Aim for loose coupling between different parts by defining a clear contract between the parts, minimizing the number of dependencies and avoiding circular dependencies altogether.</li>\n<li><strong>High cohesion:</strong> Aim for high cohesion by putting closely related logic in the same place.</li>\n<li><strong>Responsibility:</strong> Name the part according to its responsibility. The part should implement only such logic that it's responsible for and nothing else!</li>\n</ul>\n<p>See <a href=\"https://github.com/TaitoUnited/server-template\">server-template</a> as an example of a directory structure. This kind of loosely coupled modular structure has many benefits including:</p>\n<ul>\n<li>When you make changes to an existing implementation, you know better how widely the change will affect the rest of the application (what might break).</li>\n<li>When you make changes to a feature, you don't have to jump around in the code tree searching for the correct places that you need to change.</li>\n<li>If you just started in the project as a new developer, you don't have to understand the whole application; only the loosely coupled parts that you are working with.</li>\n<li>It is easier to write and maintain unit/integration tests.</li>\n<li>If the application has grown large, it is easier to split it into parts that are deployed to server or loaded to browser independently.</li>\n<li>If the application is old, it is easier to develop new features using a modern technology and migrate old parts one by one only when it is really necessary.</li>\n</ul>\n<h4>Naming</h4>\n<p>As stated previously, each part should be named according to its responsibility. But naming can be hard. The following resources might provide some help in finding well established common terminology. Knowing the most commonly used design patterns doesn't hurt either, but there is no need to learn all of them.</p>\n<ul>\n<li>TODO modern terminology: ...</li>\n<li>TODO basic terminology: service, dao, repository, ...</li>\n<li><a href=\"http://www.blackwasp.co.uk/gofpatterns.aspx\">GoF Design Patterns</a></li>\n</ul>\n<h4>Tips</h4>\n<ul>\n<li>Avoid premature optimization. During implementation of a single feature, it's best to invest on code maintainability and optimize only if it's really necessary. More often than not optimization requires additional work and weakens maintainability.</li>\n</ul>\n<hr>\n<p><strong>Next:</strong> <a href=\"c-modern-server-infrastructure\">APPENDIX C: Modern server infrastructure</a></p>"},"menu":{"edges":[{"node":{"id":"81bf5f66-6991-5d50-b34c-d0a6d9a3c844","headings":[{"value":"1. Starting a new project"}],"fields":{"slug":"/tutorial/01-starting-a-new-project/"}}},{"node":{"id":"0792cd1f-75ad-572c-a669-1191588b6a04","headings":[{"value":"2. Local development"}],"fields":{"slug":"/tutorial/02-local-development/"}}},{"node":{"id":"5ce7ad6b-83e4-5e37-8545-ee10ebb22e75","headings":[{"value":"3. Version control"}],"fields":{"slug":"/tutorial/03-version-control/"}}},{"node":{"id":"5f7bbe2a-ebbb-59db-a6ea-3f2759290067","headings":[{"value":"4. Project management"}],"fields":{"slug":"/tutorial/04-project-management/"}}},{"node":{"id":"3ea5bd2b-a017-57de-b0a7-649fcc6dd5d6","headings":[{"value":"5. Remote environments"}],"fields":{"slug":"/tutorial/05-remote-environments/"}}},{"node":{"id":"81897738-dd3b-5209-b61b-87db02fd9fb4","headings":[{"value":"6. Environment variables and secrets"}],"fields":{"slug":"/tutorial/06-env-variables-and-secrets/"}}},{"node":{"id":"929d6d9c-d2a3-5545-8862-dd9fc5950659","headings":[{"value":"7. Databases and files"}],"fields":{"slug":"/tutorial/07-databases-and-files/"}}},{"node":{"id":"b0b173b7-8469-5fc9-8755-17c06dda3f17","headings":[{"value":"8. Cloud services and Terraform"}],"fields":{"slug":"/tutorial/08-cloud-services-and-terraform/"}}},{"node":{"id":"bc11c536-55e3-5f1e-a940-4582a109b457","headings":[{"value":"9. full-stack-template specific details"}],"fields":{"slug":"/tutorial/09-full-stack-template-specific/"}}},{"node":{"id":"1c4672aa-13fc-5cd4-8f5e-54bf2ae8dcc5","headings":[{"value":"10. Production setup"}],"fields":{"slug":"/tutorial/10-production-setup/"}}},{"node":{"id":"f2a9b4ca-ac0b-553e-b787-6209b5fea557","headings":[{"value":"11. Running in production"}],"fields":{"slug":"/tutorial/11-running-in-production/"}}},{"node":{"id":"d6c5caee-601f-5704-b453-9255f5fea911","headings":[{"value":"12. Creating a custom command"}],"fields":{"slug":"/tutorial/12-creating-a-custom-command/"}}},{"node":{"id":"380f11d9-2d35-57b6-a87a-300e87cc1e22","headings":[{"value":"13. Creating a custom plugin"}],"fields":{"slug":"/tutorial/13-creating-a-custom-plugin/"}}},{"node":{"id":"69528a95-f510-5e88-867d-fe77a74a4e3d","headings":[{"value":"14. Creating a custom template"}],"fields":{"slug":"/tutorial/14-creating-a-custom-template/"}}},{"node":{"id":"bd20f397-0a6c-560f-b015-849a5c4cc39e","headings":[{"value":"15. Creating a zone"}],"fields":{"slug":"/tutorial/15-creating-a-zone/"}}},{"node":{"id":"8292ab79-7fc0-56de-8f95-fdd79a0a04f0","headings":[{"value":"16. Zone maintenance"}],"fields":{"slug":"/tutorial/16-zone-maintenance/"}}},{"node":{"id":"210b4457-4fe2-5bb4-ace2-0e2f602a9704","headings":[{"value":"17. Zone monitoring"}],"fields":{"slug":"/tutorial/17-zone-monitoring/"}}},{"node":{"id":"806495a0-4175-5179-97e8-391c63d9dba8","headings":[{"value":"18. Zone recovery"}],"fields":{"slug":"/tutorial/18-zone-recovery/"}}},{"node":{"id":"80111ccd-0af0-59ef-9cb5-a304f5575cc5","headings":[{"value":"APPENDIX A: Technology tutorials"}],"fields":{"slug":"/tutorial/a-technology-tutorials/"}}},{"node":{"id":"e1361d3d-4c2f-5f5b-8d1e-d594382f160f","headings":[{"value":"APPENDIX B: Software design"}],"fields":{"slug":"/tutorial/b-software-design/"}}},{"node":{"id":"f5d13277-8d5b-538a-a4ab-10b9b5f39473","headings":[{"value":"APPENDIX C: Modern server infrastructure"}],"fields":{"slug":"/tutorial/c-modern-server-infrastructure/"}}},{"node":{"id":"6673546d-494e-5691-8485-19a1643b5451","headings":[{"value":"APPENDIX D: Security"}],"fields":{"slug":"/tutorial/d-security/"}}},{"node":{"id":"1c6777d8-17bc-5001-af9c-84509e3d5b87","headings":[],"fields":{"slug":"/tutorial/e-data-protection-and-privacy/"}}},{"node":{"id":"099d3664-78d3-593b-8718-6de838c1b9d7","headings":[{"value":"APPENDIX F: SSL/TLS certificates"}],"fields":{"slug":"/tutorial/f-certificates/"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"e1361d3d-4c2f-5f5b-8d1e-d594382f160f"}}